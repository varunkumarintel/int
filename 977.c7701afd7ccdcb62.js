"use strict";(self.webpackChunktenant_ui=self.webpackChunktenant_ui||[]).push([[977],{6977:(q,f,r)=>{r.r(f),r.d(f,{AdminApiKeysModule:()=>W});var u=r(9808),C=r(1174),m=r(4894),g=r(1083),e=r(5e3),A=r(9063),v=r(1882),x=r(6082),w=r(5664),O=r(8555),P=r(5221),y=r(6087),_=r(4847),p=r(2075),T=r(1448),M=r(2694),I=r(8966),b=r(5245),K=r(2313),k=r(5970),S=r(9772),h=r(9287);function Z(n,c){if(1&n&&(e.TgZ(0,"mat-header-cell",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.headerName," ")}}function D(n,c){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=c.$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[i.columnkey]," ")}}function Y(n,c){1&n&&(e.ynx(0,11),e.YNc(1,Z,2,1,"mat-header-cell",12),e.YNc(2,D,2,1,"mat-cell",5),e.BQk()),2&n&&e.Q6J("matColumnDef",c.$implicit.columnkey)}function L(n,c){1&n&&(e.TgZ(0,"mat-header-cell"),e._uU(1,"API Key"),e.qZA())}function N(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"span",20,21),e.NdJ("keydown",function(o){e.CHM(t);const a=e.oxw(),s=a.$implicit,l=a.dataIndex;return e.oxw().getApiKey(o,s.id,s.serviceId,l)})("click",function(o){e.CHM(t);const a=e.oxw(),s=a.$implicit,l=a.dataIndex;return e.oxw().getApiKey(o,s.id,s.serviceId,l)}),e._uU(2,"visibility"),e.qZA()}}function H(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"span",22,21),e.NdJ("keydown",function(o){e.CHM(t);const a=e.oxw(),s=a.$implicit,l=a.dataIndex;return e.oxw().hideApiKey(o,s.id,s.serviceId,l)})("click",function(o){e.CHM(t);const a=e.oxw(),s=a.$implicit,l=a.dataIndex;return e.oxw().hideApiKey(o,s.id,s.serviceId,l)}),e._uU(2,"visibility_off"),e.qZA()}}function U(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",23,21),e.NdJ("mouseup",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().copyToClipBoard(o,a.apiKey)})("keydown",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().copyToClipBoard(o,a.apiKey)})("click",function(){return e.CHM(t),e.MAs(1).show()})("mouseenter",function(o){return o.stopImmediatePropagation()})("mouseleave",function(o){return o.stopImmediatePropagation()}),e._uU(2,"flip_to_front"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("cdkCopyToClipboard",t.copiedApiKey)}}function J(n,c){if(1&n&&(e.TgZ(0,"mat-cell")(1,"div",14)(2,"span",15)(3,"span",16),e._uU(4),e.qZA(),e.YNc(5,N,3,0,"span",17),e.YNc(6,H,3,0,"span",18),e.YNc(7,U,3,1,"button",19),e.qZA()()()),2&n){const t=c.$implicit;e.xp6(3),e.ekj("gray-text",!t.showApi),e.s9C("title",t.showApi?t.apiKey:""),e.xp6(1),e.hij(" ",t.showApi?t.apiKey:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"," "),e.xp6(1),e.Q6J("ngIf",!t.showApi),e.xp6(1),e.Q6J("ngIf",t.showApi),e.xp6(1),e.Q6J("ngIf",t.showApi)}}function B(n,c){1&n&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Actions "),e.qZA())}function Q(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"mat-cell")(1,"div",24)(2,"a",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().reGenerateAdminAPIKey(a)}),e._UZ(3,"mat-icon",26),e.qZA()()()}}function R(n,c){1&n&&e._UZ(0,"mat-header-row")}function $(n,c){if(1&n&&e._UZ(0,"mat-row",27),2&n){const t=c.$implicit,i=e.oxw();e.ekj("example-expanded-row",i.expandedElement===t)}}function F(n,c){if(1&n&&(e.TgZ(0,"tr",28)(1,"td",29),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",t.displayedColumns.length),e.xp6(1),e.hij(" ",e.lcZ(3,2,"adminApi.noEntries")," ")}}const j=function(){return[5,10,25,100]};let E=(()=>{class n{constructor(t,i,o,a,s,l){this.dialog=t,this.translate=i,this.iconRegistry=o,this.sanitizer=a,this.subscriptionService=s,this.alertService=l,this.displayedColumns=["name","apikey","actions"],this.showCopyIcon=[],this.copiedApiKey="",this.columns=[],this.viewApiKey=new e.vpe,this.hiddenApiKey=new e.vpe,this.APIKeyList=[],o.addSvgIcon("re-generate",a.bypassSecurityTrustResourceUrl("../assets/images/svg/re-generate.svg"))}set data(t){this.setTable(t)}ngOnInit(){this.getLocale()}getLocale(){this.translate.get(["common.cancel","adminApi.regenerateDialogHeader","adminApi.regenerateDialogDescription","adminApi.regenerateDialogConfirm","adminApi.regenerateDialogSubmitBtn","adminApi.regenerateSuccessAlertMessage"]).subscribe(t=>{this.translations=t})}setTable(t){this.APIKeyList=t,this.dataSource=new p.by(this.APIKeyList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getApiKey(t,i,o,a){(null==t.keyCode||13==t.keyCode)&&this.viewApiKey.emit({id:i,serviceId:o,index:a,APIKeyList:this.APIKeyList})}hideApiKey(t,i,o,a){(null==t.keyCode||13==t.keyCode)&&this.hiddenApiKey.emit({id:i,serviceId:o,index:a,APIKeyList:this.APIKeyList})}copyToClipBoard(t,i){(null==t.keyCode||13==t.keyCode)&&(this.copiedApiKey=i)}reGenerateAdminAPIKey(t){this.dialog.open(M.z,{panelClass:"confirmation-dialog",data:{header:this.translations["adminApi.regenerateDialogHeader"],description:this.translate.instant("adminApi.regenerateDialogDescription",{name:t.name}),descriptionConfirm:this.translations["adminApi.regenerateDialogConfirm"],cancelBtnText:this.translations["common.cancel"],submitBtnText:this.translations["adminApi.regenerateDialogSubmitBtn"]}}).afterClosed().subscribe(o=>{o==T.g.SUBMIT&&this.subscriptionService.deleteApiKey(t.serviceId,t.id).subscribe({next:()=>{this.APIKeyList=[],this.subscriptionService.getAllAdminSubscription(t.serviceId,t.productId,"management").subscribe(a=>{a.forEach(s=>{this.APIKeyList.push({id:s.id,name:s.name,prod:s.product_name,productId:s.product_id,status:""==s.status?"Active":s.status,serviceId:s.service_id,apiKey:"******",showApi:!1})}),this.dataSource=new p.by(this.APIKeyList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.alertService.success(this.translations["adminApi.regenerateSuccessAlertMessage"])})}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.uw),e.Y36(m.sK),e.Y36(b.jv),e.Y36(K.H7),e.Y36(A.F),e.Y36(k.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-api-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first),e.iGM(o=e.CRH())&&(i.sort=o.first)}},inputs:{data:"data",columns:"columns"},outputs:{viewApiKey:"viewApiKey",hiddenApiKey:"hiddenApiKey"},decls:13,vars:8,consts:[[1,"table-responsive"],["matSort","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","apikey"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],["tabindex","0",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of API key",3,"hidden","length","pageSizeOptions"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-sort-header",""],[1,"key-wrapper"],[1,"api-key-clip"],[1,"api-key-text",3,"title"],["tabindex","0","class","material-icons api-key","matTooltipPosition","above","matTooltip","Show API key",3,"keydown","click",4,"ngIf"],["tabindex","0","class","material-icons api-key","matTooltipPosition","above","matTooltip","Hide API key",3,"keydown","click",4,"ngIf"],["tabindex","0","class","material-icons api-key copy-key","matTooltipPosition","above","matTooltip","Copied!",3,"cdkCopyToClipboard","mouseup","keydown","click","mouseenter","mouseleave",4,"ngIf"],["tabindex","0","matTooltipPosition","above","matTooltip","Show API key",1,"material-icons","api-key",3,"keydown","click"],["tooltip","matTooltip"],["tabindex","0","matTooltipPosition","above","matTooltip","Hide API key",1,"material-icons","api-key",3,"keydown","click"],["tabindex","0","matTooltipPosition","above","matTooltip","Copied!",1,"material-icons","api-key","copy-key",3,"cdkCopyToClipboard","mouseup","keydown","click","mouseenter","mouseleave"],[1,"action-items"],["href","javascript:;","role","button","aria-label","Regenerate Admin API key",1,"re-generate",3,"click"],["svgIcon","re-generate",1,"mat-icon"],["tabindex","0"],[1,"mat-row"],[1,"mat-cell","text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-table",1),e.YNc(2,Y,3,1,"ng-container",2),e.ynx(3,3),e.YNc(4,L,2,0,"mat-header-cell",4),e.YNc(5,J,8,7,"mat-cell",5),e.BQk(),e.ynx(6,6),e.YNc(7,B,2,0,"mat-header-cell",4),e.YNc(8,Q,4,0,"mat-cell",5),e.BQk(),e.YNc(9,R,1,0,"mat-header-row",7),e.YNc(10,$,1,2,"mat-row",8),e.YNc(11,F,4,4,"tr",9),e.qZA(),e._UZ(12,"mat-paginator",10),e.qZA()),2&t&&(e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(1),e.Q6J("ngForOf",i.columns),e.xp6(7),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(2),e.Q6J("hidden",!i.dataSource.data.length)("length",100)("pageSizeOptions",e.DdM(7,j)))},directives:[p.BZ,_.YE,u.sg,p.w1,p.fO,p.ge,_.nU,p.Dz,p.ev,u.O5,S.gM,h.i3,b.Hw,p.as,p.XQ,p.nj,p.Gk,p.Ee,y.NW],pipes:[m.X$],styles:["@font-face{font-family:Intel-Clear;src:url(IntelClear_Rg.30607c4b31c11740.woff2)}@font-face{font-family:IntelOne-Display-Light;src:url(intelone-display-light.05643278d67beeb2.woff2)}@font-face{font-family:IntelOne-Display;src:url(intelone-display-regular.61b1b4a0da66bb2b.woff2)}@font-face{font-family:IntelOne-Text;src:url(intelone-text-regular.aed322e6ce08ad16.woff2)}.table-responsive[_ngcontent-%COMP%]{box-shadow:0 1px 1px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;border-radius:4px;background:#fff}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{width:100%;max-width:100%;margin-bottom:1rem;display:table;border-collapse:collapse;margin:0}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-footer-row[_ngcontent-%COMP%]{border-bottom:solid 1px #d0d0d0}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border-bottom:solid 1px #d0d0d0;height:48px;display:table-row}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{font-family:IntelOne-Display;color:#757575;font-weight:600}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{word-wrap:break-word;display:table-cell;padding:15px 10px;line-break:unset;width:auto;white-space:nowrap;overflow:hidden;vertical-align:middle;font-family:IntelOne-Text}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]{font-size:12px}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]{display:flex}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]{border:dashed .5px #000;padding:5px;display:flex;align-items:center;justify-content:center;min-width:195px}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]   .api-key.material-icons[_ngcontent-%COMP%]{font-size:19px;color:#000;cursor:pointer;margin:0 5px;outline-offset:3px;outline-width:8px;outline-color:transparent;outline-style:solid}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]   .api-key.material-icons[_ngcontent-%COMP%]:focus-visible{outline-color:#00377c;outline-offset:3px;outline-width:3px;outline-style:solid;transition:outline .5s ease-out}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]   .copy-key.material-icons[_ngcontent-%COMP%]{padding:0;background:none;border:none}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]   .api-key-text[_ngcontent-%COMP%]{max-width:135px;text-overflow:ellipsis;overflow:hidden}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .key-wrapper[_ngcontent-%COMP%]   .api-key-clip[_ngcontent-%COMP%]   .gray-text[_ngcontent-%COMP%]{color:#757575}.table-responsive[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .action-items[_ngcontent-%COMP%]   mat-icon.mat-icon[_ngcontent-%COMP%]{width:32px;height:32px;cursor:pointer}td.mat-cell[_ngcontent-%COMP%]{border-color:transparent}td.mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:347px;font-family:Intel-Clear}"]}),n})();const z=[{path:"",component:(()=>{class n{constructor(t,i,o,a,s){this.subscriptionService=t,this.serviceOffer=i,this.productService=o,this.announcer=a,this.loaderService=s,this.adminApis=[],this.columns=[{columnkey:"name",headerName:"API key name"}],this.serviceOffering=[],this.subscribedServiceOffers=[]}ngOnInit(){this.serviceOffer.getTenantServices().subscribe({next:t=>{this.subscribedServiceOffers=t[0],this.productService.getProductsByPlanId(this.subscribedServiceOffers.service_offer_id,this.subscribedServiceOffers.plan_id).subscribe(i=>{const o=i.products.find(a=>"management"===a.product_type);this.getAllAdminSubscription(this.subscribedServiceOffers.id,o.id,"management",i)}),this.getServiceOffers()}})}ngAfterViewInit(){let t=!1;this.loaderService.isLoading.subscribe(i=>{!t&&!i&&setTimeout(()=>{this.announcer.announce("Admin API Keys page has been loaded."),t=!0},1e3)})}getAllAdminSubscription(t,i,o,a){this.subscriptionService.getAllAdminSubscription(t,i,o).subscribe(s=>{this.adminApis=s.map(l=>{let d=a.products.find(V=>l.product_id==V.id);return{id:l.id,name:l.name,plan:{id:this.subscribedServiceOffers.plan_id,name:this.subscribedServiceOffers.plan_name},prod:null==d?"NA":d.name,productId:null==d?"NA":d.id,status:""==l.status?"Active":l.status,serviceId:l.service_id,apiKey:"******",showApi:!1}}),this.serviceOffering.map(l=>{null!=l.mySubscription&&l.mySubscription.id==this.adminApis[0].serviceId&&(l.apiList=this.adminApis)})})}getServiceOffers(){this.serviceOffer.getServiceOffers().subscribe({next:t=>{this.serviceOffering=t.map(i=>(i.id==this.subscribedServiceOffers.service_offer_id&&(i.mySubscription=this.subscribedServiceOffers),i))}})}viewApiKey(t){this.subscriptionService.viewApiKey(t.serviceId,t.id).subscribe({next:i=>{this.serviceOffering.find(o=>{void 0!==o.mySubscription&&o.mySubscription.id==t.serviceId&&(o.apiList=t.APIKeyList,o.apiList.map(a=>{a.id==t.id&&(a.apiKey=i.keys[0],a.showApi=!0)}))})}})}hideApiKey(t){this.serviceOffering.find(i=>{void 0!==i.mySubscription&&i.mySubscription.id==t.serviceId&&(i.apiList=t.APIKeyList,i.apiList.map(o=>{o.id==t.id&&(o.apiKey="******",o.showApi=!1)}))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.F),e.Y36(v._),e.Y36(x.M),e.Y36(w.Kd),e.Y36(O.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-api-keys"]],decls:14,vars:8,consts:[[1,"container"],[1,"page-heading"],[1,"content-area"],[1,"content-body"],[1,"table-admin-api"],[1,"table-area"],[3,"data","columns","viewApiKey","hiddenApiKey"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"alert"),e.TgZ(2,"div",1)(3,"h1"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",2)(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",3)(11,"div",4)(12,"div",5)(13,"app-admin-api-table",6),e.NdJ("viewApiKey",function(a){return i.viewApiKey(a)})("hiddenApiKey",function(a){return i.hideApiKey(a)}),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"adminApi.title")),e.xp6(4),e.Oqu(e.lcZ(9,6,"adminApi.description")),e.xp6(5),e.Q6J("data",i.adminApis)("columns",i.columns))},directives:[P.w,E],pipes:[m.X$],styles:[""]}),n})()}];let G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(z)],g.Bz]}),n})();var X=r(446);let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,G,m.aw,C.q,h.Iq,X.n]]}),n})()}}]);