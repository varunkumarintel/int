"use strict";(self.webpackChunktenant_ui=self.webpackChunktenant_ui||[]).push([[55],{2694:(C,h,t)=>{t.d(h,{z:()=>s});var c=t(8966),n=t(5e3),m=t(5664),u=t(9224),a=t(5245),f=t(4834),r=t(7423);let s=(()=>{class e{constructor(_,d,P){this.dialogRef=_,this.data=d,this.announcer=P}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.announcer.announce(`${this.data.header} dialog is opened.`)},0)}onCancel(){this.dialogRef.close("close")}onConfirm(){this.dialogRef.close(!0)}}return e.\u0275fac=function(_){return new(_||e)(n.Y36(c.so),n.Y36(c.WI),n.Y36(m.Kd))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-confirmation-dialog"]],decls:15,vars:5,consts:[["aria-hidden","true",1,"fa","fa-exclamation-triangle"],[3,"innerHTML"],[1,"content-confirm"],["align","end"],["mat-button","",1,"cancel-btn","mat-cancel-btn-hover",3,"click"],["mat-button","",1,"submit-btn","mat-submit-btn-hover",3,"click"]],template:function(_,d){1&_&&(n.TgZ(0,"mat-card")(1,"mat-card-title"),n._uU(2),n.qZA(),n.TgZ(3,"mat-card-content")(4,"mat-icon"),n._UZ(5,"i",0),n.qZA(),n._UZ(6,"p",1),n.qZA(),n.TgZ(7,"p",2),n._uU(8),n.qZA(),n._UZ(9,"mat-divider"),n.TgZ(10,"mat-card-actions",3)(11,"button",4),n.NdJ("click",function(){return d.dialogRef.close("cancel")}),n._uU(12),n.qZA(),n.TgZ(13,"button",5),n.NdJ("click",function(){return d.dialogRef.close("submit")}),n._uU(14),n.qZA()()()),2&_&&(n.xp6(2),n.Oqu(d.data.header),n.xp6(4),n.Q6J("innerHTML",d.data.description,n.oJD),n.xp6(2),n.Oqu(d.data.descriptionConfirm),n.xp6(4),n.Oqu(d.data.cancelBtnText),n.xp6(2),n.Oqu(d.data.submitBtnText))},directives:[u.a8,u.n5,u.dn,a.Hw,f.d,u.hq,r.lW],styles:["@font-face{font-family:Intel-Clear;src:url(IntelClear_Rg.30607c4b31c11740.woff2)}@font-face{font-family:IntelOne-Display-Light;src:url(intelone-display-light.05643278d67beeb2.woff2)}@font-face{font-family:IntelOne-Display;src:url(intelone-display-regular.61b1b4a0da66bb2b.woff2)}@font-face{font-family:IntelOne-Text;src:url(intelone-text-regular.aed322e6ce08ad16.woff2)}  .confirmation-dialog .mat-dialog-container{width:507px;height:auto;padding:0%;overflow:visible}mat-card[_ngcontent-%COMP%]{padding:0}mat-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{padding:16px;background:#E0E0E0;border-radius:4px 4px 0 0;font-size:20px;color:#000000de;letter-spacing:.25px}mat-card[_ngcontent-%COMP%]   .content-confirm[_ngcontent-%COMP%]{font-weight:700;margin:0 0 15px 20px;font-size:17px}mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;background:#fee9e9;margin:16px 20px 10px;border-radius:4px}mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#f44336;padding:16px}mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:10px 10px 10px 0;color:#f44336}mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]{padding:8px 16px}mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{text-transform:uppercase;font-size:14px;letter-spacing:1.25px;font-weight:600}mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .mat-button.cancel-btn[_ngcontent-%COMP%]{color:#3f51b5}mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .mat-button.submit-btn[_ngcontent-%COMP%]{background:#f44336;color:#fff}mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .mat-button.submit-btn.mat-submit-btn-hover[_ngcontent-%COMP%]:hover{background:#d01104;color:#fff}"]}),e})()},7055:(C,h,t)=>{t.r(h),t.d(h,{UserProfileModule:()=>z});var c=t(9808),n=t(4894),m=t(1174),u=t(1083),a=t(1448),f=t(2694),r=t(2340),s=t(5808),e=t(5e3),M=t(9444),_=t(8966),d=t(1978),P=t(1882),T=t(9063),U=t(6082),y=t(5970),I=t(3071),E=t(1728),Z=t(2160),L=t(7423),D=t(5245);function R(i,g){if(1&i){const o=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(o);const v=e.oxw().$implicit;return e.oxw(3).unSubscribeToAmberService(v)}),e.TgZ(2,"mat-icon",14),e._uU(3,"cancel"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(1),e.Q6J("tabIndex",0),e.xp6(3),e.hij(" ",e.lcZ(5,2,"home.unsubscribe"),""))}function N(i,g){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,R,6,4,"div",11),e.qZA()()),2&i){const o=g.$implicit;e.xp6(2),e.Oqu(o.name),e.xp6(2),e.Q6J("ngIf",o.mySubscription)}}function $(i,g){if(1&i&&(e.TgZ(0,"table")(1,"tr")(2,"th"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,N,5,2,"tr",10),e.qZA()),2&i){const o=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,3,"subscriptions.service")),e.xp6(3),e.Oqu(e.lcZ(7,5,"subscriptions.actions")),e.xp6(2),e.Q6J("ngForOf",o.serviceOffering)}}function B(i,g){if(1&i&&(e.TgZ(0,"div",3)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,$,9,7,"table",9),e.qZA()),2&i){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"subscriptions.subscription")),e.xp6(2),e.Q6J("ngIf",o.serviceOffering.length)}}const w=[{path:"",component:(()=>{class i{constructor(o,l,v,b,S,x,p,O,A,Y,W,J){this.translate=o,this.subjectService=l,this.dialog=v,this.router=b,this.authService=S,this.serviceOffer=x,this.subscriptionService=p,this.productService=O,this.alertService=A,this.userService=Y,this.configService=W,this.cookieService=J,this.emailAddress="",this.role="",this.serviceOffering=[],this.subscribedServiceOffers=[],this.allSubscription=[],this.portalPath=r.N.portalPath,this.authProvider="",this.userInfo=localStorage.getItem(a.g.USER_INFO)}ngOnInit(){this.subjectService.isPageFound.next(!0),this.getLocale(),this.userInfo&&(this.userInfo=JSON.parse(this.userInfo),this.emailAddress=this.userInfo.email,this.role=this.userInfo.tenant_roles[0].roles[0].name),this.subjectService.isPageFound.next(!0),this.authProvider=this.userService.getAuthProvider();const o=localStorage.getItem(a.g.USER_INFO);this.activeAccount=JSON.parse(o),this.isTenantAdmin=this.activeAccount.tenant_roles[0].roles[0].permissions.hasOwnProperty("users"),this.activeAccount&&Object.keys(this.activeAccount).length&&this.activeAccount.status==a.g.STATUS_INACTIVE||(this.activeAccount=this.authService.instance.getActiveAccount()),this.getMyServices()}getLocale(){this.translate.get(["profile.userProfileDesc","common.cancel","home.subscribePopupDesc","home.activateConfigure","home.activateOnly","home.apiPolicyDeleted","home.unsubscribeDesc","home.unsubscribeConfirm","common.yesUnsubscribe"]).subscribe(o=>{this.translations=o})}getMyServices(){this.serviceOffer.getTenantServices().subscribe({next:o=>{localStorage.setItem(a.g.SUBSCRIBED_SERVICES,o.length),this.subscribedServiceOffers=o,this.subjectService.totalSubscribed.next(o.length),this.getServiceOffers()}})}getServiceOffers(){this.serviceOffer.getServiceOffers().subscribe({next:o=>{this.serviceOffering=o.map((l,v)=>(this.subscribedServiceOffers.find(b=>{l.id==b.service_offer_id&&(l.mySubscription=b)}),l)),this.subscribedServiceOffers.forEach(l=>{this.getAllSubscription(l.service_offer_id,l.id,l.plan_id,l.plan_name)})}})}getAllSubscription(o,l,v,b){this.subscriptionService.getAllSubscription(l,"attestation").subscribe(S=>{S.length>0&&this.productService.getProductsByPlanId(o,v).subscribe(x=>{this.allSubscription=S.map(p=>{let O=x.products.find(A=>p.product_id==A.id);return{id:p.id,name:p.name,plan:{id:v,name:b},prod:null==O?"NA":O.name,productId:null==O?"NA":O.id,status:""==p.status?a.g.STATUS_ACTIVE:p.status,serviceId:p.service_id,apiKey:"******",showApi:!1}}),this.serviceOffering.map(p=>{null!=p.mySubscription&&p.mySubscription.id==this.allSubscription[0].serviceId&&(p.apiList=this.allSubscription)})})})}checkSubscribedServices(o){return this.subscribedServiceOffers.find(l=>l.service_offer_id===o)}unsubscribeToService(o){this.serviceOffer.unsubscribeToServiceOffers(o.mySubscription.id).subscribe({next:()=>{this.logout(),this.alertService.success(this.translations["home.apiPolicyDeleted"])}})}logout(){this.configService.logout().subscribe({next:()=>{if("Amber"==this.authProvider){const o=this.authService.instance.getAllAccounts()[0];this.authService.acquireTokenSilent({scopes:s.pU.api.scopes,account:o}).subscribe({next:v=>{this.authService.logoutRedirect({idTokenHint:v.idToken,postLogoutRedirectUri:r.N.adb2cConfig.postLogoutRedirectUri}),this.cookieService.delete("x-csrf-token","/"),localStorage.clear()},error:()=>{this.cookieService.delete("x-csrf-token","/"),localStorage.clear(),this.authService.loginRedirect()}})}else"Azure"==this.authProvider&&(localStorage.clear(),this.router.navigate(["/home"]))},error:()=>{this.cookieService.delete("x-csrf-token","/"),localStorage.clear(),this.authService.loginRedirect()}})}unSubscribeToAmberService(o){this.checkSubscribedServices(o.id)&&this.dialog.open(f.z,{panelClass:"confirmation-dialog",data:{header:"Unsubscribe from service",description:this.translations["home.unsubscribeDesc"],descriptionConfirm:this.translations["home.unsubscribeConfirm"],cancelBtnText:this.translations["common.cancel"],submitBtnText:this.translations["common.yesUnsubscribe"]}}).afterClosed().subscribe(v=>{v==a.g.SUBMIT&&this.unsubscribeToService(o)})}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(n.sK),e.Y36(M._),e.Y36(_.uw),e.Y36(u.F0),e.Y36(d.W2),e.Y36(P._),e.Y36(T.F),e.Y36(U.M),e.Y36(y.c),e.Y36(I.K),e.Y36(E.E),e.Y36(Z.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-profile"]],decls:32,vars:24,consts:[[1,"user-profile-wrapper"],[1,"page-heading"],[1,"page-description"],[1,"user-profile-content"],[1,"form-field"],[1,"form-label"],[1,"form-field-value"],[1,"form-field","policy-type-container"],["class","user-profile-content",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","service-btn",4,"ngIf"],[1,"service-btn"],["mat-flat-button","",1,"pause-service-btn","mat-default-btn-hover",3,"tabIndex","click"],[1,"material-icons-outlined"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"p",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",3)(9,"h2"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",4)(13,"label",5),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span",6),e._uU(17),e.qZA()(),e.TgZ(18,"div",4)(19,"label",5),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span",6),e._uU(23),e.qZA()(),e.TgZ(24,"div",7)(25,"label",5),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"span",6),e._uU(29),e.ALo(30,"translate"),e.qZA()()(),e.YNc(31,B,5,4,"div",8),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,10,"profile.userProfile")),e.xp6(3),e.hij(" ",e.lcZ(7,12,"profile.userProfileDesc"),""),e.xp6(4),e.Oqu(e.lcZ(11,14,"profile.profile")),e.xp6(4),e.Oqu(e.lcZ(15,16,"profile.email")),e.xp6(3),e.Oqu(l.emailAddress),e.xp6(3),e.Oqu(e.lcZ(21,18,"profile.role")),e.xp6(3),e.Oqu(l.role),e.xp6(3),e.Oqu(e.lcZ(27,20,"profile.language")),e.xp6(3),e.Oqu(e.lcZ(30,22,"profile.english")),e.xp6(2),e.Q6J("ngIf","Azure"!==l.authProvider&&l.isTenantAdmin&&l.subscribedServiceOffers.length))},directives:[c.O5,c.sg,L.lW,D.Hw],pipes:[n.X$],styles:["@font-face{font-family:Intel-Clear;src:url(IntelClear_Rg.30607c4b31c11740.woff2)}@font-face{font-family:IntelOne-Display-Light;src:url(intelone-display-light.05643278d67beeb2.woff2)}@font-face{font-family:IntelOne-Display;src:url(intelone-display-regular.61b1b4a0da66bb2b.woff2)}@font-face{font-family:IntelOne-Text;src:url(intelone-text-regular.aed322e6ce08ad16.woff2)}.user-profile-wrapper[_ngcontent-%COMP%]   .page-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;margin-bottom:24px;font-family:IntelOne-Display;font-weight:500}.user-profile-wrapper[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{font-family:IntelOne-Text;font-size:16px;line-height:24px;color:#1a2028;margin-bottom:20px}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:IntelOne-Text;font-weight:600;margin-bottom:15px;font-size:20px}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]{display:flex}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]   .add-service-btn[_ngcontent-%COMP%]{background:#0054AE;padding:0 16px;color:#fff;font-size:14px;font-weight:600;height:40px;text-transform:capitalize;outline-offset:3px;outline-width:8px;outline-color:transparent;outline-style:solid}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]   .add-service-btn[_ngcontent-%COMP%]:focus-visible{outline-color:#00377c;outline-offset:3px;outline-width:3px;outline-style:solid;transition:outline .5s ease-out}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]   .pause-service-btn[_ngcontent-%COMP%]{background:#F5F5F5;padding:0 15px;color:#202020;font-size:14px;font-weight:600;height:40px;outline-offset:3px;outline-width:8px;outline-color:transparent;outline-style:solid}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]   .pause-service-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:27px}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .service-btn[_ngcontent-%COMP%]   .pause-service-btn[_ngcontent-%COMP%]:focus-visible{outline-color:#00377c;outline-offset:3px;outline-width:3px;outline-style:solid;transition:outline .5s ease-out}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:20px}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#494b51;font-size:14px;font-weight:400;font-family:IntelOne-Text;display:inline-block;min-width:130px;margin:0}.user-profile-wrapper[_ngcontent-%COMP%]   .user-profile-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-field-value[_ngcontent-%COMP%]{font-family:IntelOne-Text;color:#494b51;font-weight:700;font-size:14px}.user-profile-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.user-profile-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .user-profile-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(w)],u.Bz]}),i})();var K=t(3075);let z=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[K.qu],imports:[[c.ez,n.aw,m.q,F]]}),i})()},6082:(C,h,t)=>{t.d(h,{M:()=>u});var c=t(2340),n=t(5e3),m=t(520);let u=(()=>{class a{constructor(r){this.http=r}getProductsByPlanId(r,s){return this.http.get(`${c.N.nodeServerURL}/service-offers/${r}/plans/${s}`)}getPlans(r){return this.http.get(`${c.N.nodeServerURL}/service-offers/${r}/plans`)}}return a.\u0275fac=function(r){return new(r||a)(n.LFG(m.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},1882:(C,h,t)=>{t.d(h,{_:()=>a});var c=t(2340),n=t(1135),m=t(5e3),u=t(520);let a=(()=>{class f{constructor(s){this.http=s,this.totalSubscribed=new n.X(0)}getServiceOffers(){return this.http.get(`${c.N.nodeServerURL}/service-offers`)}getTenantServices(){return this.http.get(`${c.N.nodeServerURL}/services`)}subscribeToServiceOffers(s){return this.http.post(`${c.N.nodeServerURL}/services`,s)}unsubscribeToServiceOffers(s){return this.http.delete(`${c.N.nodeServerURL}/services/${s}`)}getAttestationTypes(s){return this.http.get(`${c.N.nodeServerURL}/service-offers/${s}/attestation-policy-type`)}}return f.\u0275fac=function(s){return new(s||f)(m.LFG(u.eN))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9063:(C,h,t)=>{t.d(h,{F:()=>u});var c=t(2340),n=t(5e3),m=t(520);let u=(()=>{class a{constructor(r){this.http=r}getAllSubscription(r,s){return this.http.get(`${c.N.nodeServerURL}/services/${r}/subscriptions?productType=${s}`)}getAllAdminSubscription(r,s,e){return this.http.get(`${c.N.nodeServerURL}/services/${r}/subscriptions?product_id=${s}&productType=${e}`)}createSubscription(r){return this.http.post(`${c.N.nodeServerURL}/subscriptions`,r)}updateSubscription(r,s){return this.http.put(`${c.N.nodeServerURL}/subscriptions/${r}`,s)}viewApiKey(r,s){return this.http.get(`${c.N.nodeServerURL}/services/${r}/subscriptions/${s}`)}deleteApiKey(r,s){return this.http.delete(`${c.N.nodeServerURL}/services/${r}/subscriptions/${s}`)}getAllTags(){return this.http.get(`${c.N.nodeServerURL}/tags`)}createTagName(r){return this.http.post(`${c.N.nodeServerURL}/tags`,r)}}return a.\u0275fac=function(r){return new(r||a)(n.LFG(m.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);